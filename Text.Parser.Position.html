<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Text.Parser.Position</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Pragma">--safe</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">module</a> <a id="44" href="Text.Parser.Position.html" class="Module">Text.Parser.Position</a> <a id="65" class="Keyword">where</a>

<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Data.Bool.html" class="Module">Data.Bool</a>
<a id="94" class="Keyword">open</a> <a id="99" class="Keyword">import</a> <a id="106" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="115" class="Keyword">import</a> <a id="122" href="Data.Nat.Show.html" class="Module">Data.Nat.Show</a> <a id="136" class="Symbol">as</a> <a id="139" class="Module">NShow</a>
<a id="145" class="Keyword">open</a> <a id="150" class="Keyword">import</a> <a id="157" href="Data.Char.html" class="Module">Data.Char</a> <a id="167" class="Keyword">using</a> <a id="173" class="Symbol">(</a><a id="174" href="Agda.Builtin.Char.html#200" class="Postulate">Char</a><a id="178" class="Symbol">;</a> <a id="180" href="Data.Char.Properties.html#1531" class="Function Operator">_==_</a><a id="184" class="Symbol">)</a>
<a id="186" class="Keyword">open</a> <a id="191" class="Keyword">import</a> <a id="198" href="Data.String.html" class="Module">Data.String</a> <a id="210" class="Keyword">using</a> <a id="216" class="Symbol">(</a><a id="217" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="224" class="Symbol">;</a> <a id="226" href="Data.String.Base.html#1176" class="Function Operator">_++_</a><a id="230" class="Symbol">;</a> <a id="232" href="Agda.Builtin.String.html#262" class="Primitive">toList</a><a id="238" class="Symbol">)</a>
<a id="240" class="Keyword">open</a> <a id="245" class="Keyword">import</a> <a id="252" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="267" class="Keyword">using</a> <a id="273" class="Symbol">(</a><a id="274" href="Data.List.Base.html#3735" class="Function">foldl</a><a id="279" class="Symbol">)</a>
<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Function.html" class="Module">Function</a>

<a id="303" class="Keyword">record</a> <a id="Position"></a><a id="310" href="Text.Parser.Position.html#310" class="Record">Position</a> <a id="319" class="Symbol">:</a> <a id="321" class="PrimitiveType">Set</a> <a id="325" class="Keyword">where</a>
  <a id="333" class="Keyword">constructor</a> <a id="Position._∶_"></a><a id="345" href="Text.Parser.Position.html#345" class="InductiveConstructor Operator">_∶_</a>
  <a id="351" class="Keyword">field</a> <a id="Position.line"></a><a id="357" href="Text.Parser.Position.html#357" class="Field">line</a>   <a id="364" class="Symbol">:</a> <a id="366" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
        <a id="Position.offset"></a><a id="376" href="Text.Parser.Position.html#376" class="Field">offset</a> <a id="383" class="Symbol">:</a> <a id="385" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
<a id="387" class="Keyword">open</a> <a id="392" href="Text.Parser.Position.html#310" class="Module">Position</a> <a id="401" class="Keyword">public</a>

<a id="start"></a><a id="409" href="Text.Parser.Position.html#409" class="Function">start</a> <a id="415" class="Symbol">:</a> <a id="417" href="Text.Parser.Position.html#310" class="Record">Position</a>
<a id="426" href="Text.Parser.Position.html#357" class="Field">line</a>   <a id="433" href="Text.Parser.Position.html#409" class="Function">start</a> <a id="439" class="Symbol">=</a> <a id="441" class="Number">0</a>
<a id="443" href="Text.Parser.Position.html#376" class="Field">offset</a> <a id="450" href="Text.Parser.Position.html#409" class="Function">start</a> <a id="456" class="Symbol">=</a> <a id="458" class="Number">0</a>

<a id="update"></a><a id="461" href="Text.Parser.Position.html#461" class="Function">update</a> <a id="468" class="Symbol">:</a> <a id="470" href="Agda.Builtin.Char.html#200" class="Postulate">Char</a> <a id="475" class="Symbol">→</a> <a id="477" href="Text.Parser.Position.html#310" class="Record">Position</a> <a id="486" class="Symbol">→</a> <a id="488" href="Text.Parser.Position.html#310" class="Record">Position</a>
<a id="497" href="Text.Parser.Position.html#461" class="Function">update</a> <a id="504" href="Text.Parser.Position.html#504" class="Bound">c</a> <a id="506" href="Text.Parser.Position.html#506" class="Bound">p</a> <a id="508" class="Symbol">=</a> <a id="510" href="Data.Bool.Base.html#835" class="Function Operator">if</a> <a id="513" href="Text.Parser.Position.html#504" class="Bound">c</a> <a id="515" href="Data.Char.Properties.html#1531" class="Function Operator">==</a> <a id="518" class="String">&#39;\n&#39;</a>
  <a id="525" href="Data.Bool.Base.html#835" class="Function Operator">then</a> <a id="530" class="Keyword">record</a> <a id="537" class="Symbol">{</a> <a id="539" href="Text.Parser.Position.html#357" class="Field">line</a> <a id="544" class="Symbol">=</a> <a id="546" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="550" class="Symbol">(</a><a id="551" href="Text.Parser.Position.html#357" class="Field">line</a> <a id="556" href="Text.Parser.Position.html#506" class="Bound">p</a><a id="557" class="Symbol">)</a> <a id="559" class="Symbol">;</a> <a id="561" href="Text.Parser.Position.html#376" class="Field">offset</a> <a id="568" class="Symbol">=</a> <a id="570" class="Number">0</a> <a id="572" class="Symbol">}</a>
  <a id="576" href="Data.Bool.Base.html#835" class="Function Operator">else</a> <a id="581" class="Keyword">record</a> <a id="588" href="Text.Parser.Position.html#506" class="Bound">p</a> <a id="590" class="Symbol">{</a> <a id="592" href="Text.Parser.Position.html#376" class="Field">offset</a> <a id="599" class="Symbol">=</a> <a id="601" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="605" class="Symbol">(</a><a id="606" href="Text.Parser.Position.html#376" class="Field">offset</a> <a id="613" href="Text.Parser.Position.html#506" class="Bound">p</a><a id="614" class="Symbol">)</a> <a id="616" class="Symbol">}</a>

<a id="updates"></a><a id="619" href="Text.Parser.Position.html#619" class="Function">updates</a> <a id="627" class="Symbol">:</a> <a id="629" href="Agda.Builtin.String.html#206" class="Postulate">String</a> <a id="636" class="Symbol">→</a> <a id="638" href="Text.Parser.Position.html#310" class="Record">Position</a> <a id="647" class="Symbol">→</a> <a id="649" href="Text.Parser.Position.html#310" class="Record">Position</a>
<a id="658" href="Text.Parser.Position.html#619" class="Function">updates</a> <a id="666" href="Text.Parser.Position.html#666" class="Bound">str</a> <a id="670" href="Text.Parser.Position.html#670" class="Bound">p</a> <a id="672" class="Symbol">=</a> <a id="674" href="Data.List.Base.html#3735" class="Function">foldl</a> <a id="680" class="Symbol">(</a><a id="681" href="Function.html#1572" class="Function">flip</a> <a id="686" href="Text.Parser.Position.html#461" class="Function">update</a><a id="692" class="Symbol">)</a> <a id="694" href="Text.Parser.Position.html#670" class="Bound">p</a> <a id="696" class="Symbol">(</a><a id="697" href="Agda.Builtin.String.html#262" class="Primitive">toList</a> <a id="704" href="Text.Parser.Position.html#666" class="Bound">str</a><a id="707" class="Symbol">)</a>

<a id="show"></a><a id="710" href="Text.Parser.Position.html#710" class="Function">show</a> <a id="715" class="Symbol">:</a> <a id="717" href="Text.Parser.Position.html#310" class="Record">Position</a> <a id="726" class="Symbol">→</a> <a id="728" href="Agda.Builtin.String.html#206" class="Postulate">String</a>
<a id="735" href="Text.Parser.Position.html#710" class="Function">show</a> <a id="740" href="Text.Parser.Position.html#740" class="Bound">p</a> <a id="742" class="Symbol">=</a> <a id="744" href="Data.Nat.Show.html#987" class="Function">NShow.show</a> <a id="755" class="Symbol">(</a><a id="756" href="Text.Parser.Position.html#357" class="Field">line</a> <a id="761" href="Text.Parser.Position.html#740" class="Bound">p</a><a id="762" class="Symbol">)</a> <a id="764" href="Data.String.Base.html#1176" class="Function Operator">++</a> <a id="767" class="String">&quot;:&quot;</a> <a id="771" href="Data.String.Base.html#1176" class="Function Operator">++</a> <a id="774" href="Data.Nat.Show.html#987" class="Function">NShow.show</a> <a id="785" class="Symbol">(</a><a id="786" href="Text.Parser.Position.html#376" class="Field">offset</a> <a id="793" href="Text.Parser.Position.html#740" class="Bound">p</a><a id="794" class="Symbol">)</a>

<a id="797" class="Comment">-- Deprecated names</a>

<a id="next"></a><a id="818" href="Text.Parser.Position.html#818" class="Function">next</a> <a id="823" class="Symbol">=</a> <a id="825" href="Text.Parser.Position.html#461" class="Function">update</a>
<a id="832" class="Symbol">{-#</a> <a id="836" class="Keyword">WARNING_ON_USAGE</a> <a id="853" class="Pragma">next</a>
<a id="858" class="String">&quot;Warning: next was deprecated in v0.2.3.
Please use update instead.&quot;</a>
<a id="927" class="Symbol">#-}</a>
</pre></body></html>