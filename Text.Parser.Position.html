<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Text.Parser.Position</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Pragma">--safe</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">module</a> <a id="44" href="Text.Parser.Position.html" class="Module">Text.Parser.Position</a> <a id="65" class="Keyword">where</a>

<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Data.Bool.Base.html" class="Module">Data.Bool.Base</a> <a id="99" class="Keyword">using</a> <a id="105" class="Symbol">(</a><a id="106" href="Data.Bool.Base.html#1283" class="Function Operator">if_then_else_</a><a id="119" class="Symbol">)</a>
<a id="121" class="Keyword">open</a> <a id="126" class="Keyword">import</a> <a id="133" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="147" class="Keyword">using</a> <a id="153" class="Symbol">(</a><a id="154" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a><a id="155" class="Symbol">;</a> <a id="157" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a><a id="160" class="Symbol">)</a>
<a id="162" class="Keyword">import</a> <a id="169" href="Data.Nat.Show.html" class="Module">Data.Nat.Show</a> <a id="183" class="Symbol">as</a> <a id="186" class="Module">NShow</a>
<a id="192" class="Keyword">open</a> <a id="197" class="Keyword">import</a> <a id="204" href="Data.Char.html" class="Module">Data.Char</a> <a id="214" class="Keyword">using</a> <a id="220" class="Symbol">(</a><a id="221" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a><a id="225" class="Symbol">;</a> <a id="227" href="Data.Char.Properties.html#2158" class="Function Operator">_==_</a><a id="231" class="Symbol">)</a>
<a id="233" class="Keyword">open</a> <a id="238" class="Keyword">import</a> <a id="245" href="Data.String.Base.html" class="Module">Data.String.Base</a> <a id="262" class="Keyword">using</a> <a id="268" class="Symbol">(</a><a id="269" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="276" class="Symbol">;</a> <a id="278" href="Data.String.Base.html#2366" class="Function Operator">_++_</a><a id="282" class="Symbol">;</a> <a id="284" href="Data.String.Base.html#1493" class="Primitive">toList</a><a id="290" class="Symbol">)</a>
<a id="292" class="Keyword">open</a> <a id="297" class="Keyword">import</a> <a id="304" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="319" class="Keyword">using</a> <a id="325" class="Symbol">(</a><a id="326" href="Data.List.Base.html#4293" class="Function">foldl</a><a id="331" class="Symbol">)</a>
<a id="333" class="Keyword">open</a> <a id="338" class="Keyword">import</a> <a id="345" href="Function.Base.html" class="Module">Function.Base</a> <a id="359" class="Keyword">using</a> <a id="365" class="Symbol">(</a><a id="366" href="Function.Base.html#1554" class="Function">flip</a><a id="370" class="Symbol">)</a>

<a id="373" class="Keyword">record</a> <a id="Position"></a><a id="380" href="Text.Parser.Position.html#380" class="Record">Position</a> <a id="389" class="Symbol">:</a> <a id="391" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="395" class="Keyword">where</a>
  <a id="403" class="Keyword">constructor</a> <a id="_∶_"></a><a id="415" href="Text.Parser.Position.html#415" class="InductiveConstructor Operator">_∶_</a>
  <a id="421" class="Keyword">field</a> <a id="Position.line"></a><a id="427" href="Text.Parser.Position.html#427" class="Field">line</a>   <a id="434" class="Symbol">:</a> <a id="436" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
        <a id="Position.offset"></a><a id="446" href="Text.Parser.Position.html#446" class="Field">offset</a> <a id="453" class="Symbol">:</a> <a id="455" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="457" class="Keyword">open</a> <a id="462" href="Text.Parser.Position.html#380" class="Module">Position</a> <a id="471" class="Keyword">public</a>

<a id="start"></a><a id="479" href="Text.Parser.Position.html#479" class="Function">start</a> <a id="485" class="Symbol">:</a> <a id="487" href="Text.Parser.Position.html#380" class="Record">Position</a>
<a id="496" href="Text.Parser.Position.html#427" class="Field">line</a>   <a id="503" href="Text.Parser.Position.html#479" class="Function">start</a> <a id="509" class="Symbol">=</a> <a id="511" class="Number">0</a>
<a id="513" href="Text.Parser.Position.html#446" class="Field">offset</a> <a id="520" href="Text.Parser.Position.html#479" class="Function">start</a> <a id="526" class="Symbol">=</a> <a id="528" class="Number">0</a>

<a id="update"></a><a id="531" href="Text.Parser.Position.html#531" class="Function">update</a> <a id="538" class="Symbol">:</a> <a id="540" href="Agda.Builtin.Char.html#227" class="Postulate">Char</a> <a id="545" class="Symbol">→</a> <a id="547" href="Text.Parser.Position.html#380" class="Record">Position</a> <a id="556" class="Symbol">→</a> <a id="558" href="Text.Parser.Position.html#380" class="Record">Position</a>
<a id="567" href="Text.Parser.Position.html#531" class="Function">update</a> <a id="574" href="Text.Parser.Position.html#574" class="Bound">c</a> <a id="576" href="Text.Parser.Position.html#576" class="Bound">p</a> <a id="578" class="Symbol">=</a> <a id="580" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="583" href="Text.Parser.Position.html#574" class="Bound">c</a> <a id="585" href="Data.Char.Properties.html#2158" class="Function Operator">==</a> <a id="588" class="String">&#39;\n&#39;</a>
  <a id="595" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="600" class="Keyword">record</a> <a id="607" class="Symbol">{</a> <a id="609" href="Text.Parser.Position.html#427" class="Field">line</a> <a id="614" class="Symbol">=</a> <a id="616" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="620" class="Symbol">(</a><a id="621" href="Text.Parser.Position.html#427" class="Field">line</a> <a id="626" href="Text.Parser.Position.html#576" class="Bound">p</a><a id="627" class="Symbol">)</a> <a id="629" class="Symbol">;</a> <a id="631" href="Text.Parser.Position.html#446" class="Field">offset</a> <a id="638" class="Symbol">=</a> <a id="640" class="Number">0</a> <a id="642" class="Symbol">}</a>
  <a id="646" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="651" class="Keyword">record</a> <a id="658" href="Text.Parser.Position.html#576" class="Bound">p</a> <a id="660" class="Symbol">{</a> <a id="662" href="Text.Parser.Position.html#446" class="Field">offset</a> <a id="669" class="Symbol">=</a> <a id="671" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="675" class="Symbol">(</a><a id="676" href="Text.Parser.Position.html#446" class="Field">offset</a> <a id="683" href="Text.Parser.Position.html#576" class="Bound">p</a><a id="684" class="Symbol">)</a> <a id="686" class="Symbol">}</a>

<a id="updates"></a><a id="689" href="Text.Parser.Position.html#689" class="Function">updates</a> <a id="697" class="Symbol">:</a> <a id="699" href="Agda.Builtin.String.html#336" class="Postulate">String</a> <a id="706" class="Symbol">→</a> <a id="708" href="Text.Parser.Position.html#380" class="Record">Position</a> <a id="717" class="Symbol">→</a> <a id="719" href="Text.Parser.Position.html#380" class="Record">Position</a>
<a id="728" href="Text.Parser.Position.html#689" class="Function">updates</a> <a id="736" href="Text.Parser.Position.html#736" class="Bound">str</a> <a id="740" href="Text.Parser.Position.html#740" class="Bound">p</a> <a id="742" class="Symbol">=</a> <a id="744" href="Data.List.Base.html#4293" class="Function">foldl</a> <a id="750" class="Symbol">(</a><a id="751" href="Function.Base.html#1554" class="Function">flip</a> <a id="756" href="Text.Parser.Position.html#531" class="Function">update</a><a id="762" class="Symbol">)</a> <a id="764" href="Text.Parser.Position.html#740" class="Bound">p</a> <a id="766" class="Symbol">(</a><a id="767" href="Data.String.Base.html#1493" class="Primitive">toList</a> <a id="774" href="Text.Parser.Position.html#736" class="Bound">str</a><a id="777" class="Symbol">)</a>

<a id="show"></a><a id="780" href="Text.Parser.Position.html#780" class="Function">show</a> <a id="785" class="Symbol">:</a> <a id="787" href="Text.Parser.Position.html#380" class="Record">Position</a> <a id="796" class="Symbol">→</a> <a id="798" href="Agda.Builtin.String.html#336" class="Postulate">String</a>
<a id="805" href="Text.Parser.Position.html#780" class="Function">show</a> <a id="810" href="Text.Parser.Position.html#810" class="Bound">p</a> <a id="812" class="Symbol">=</a> <a id="814" href="Data.Nat.Show.html#1928" class="Function">NShow.show</a> <a id="825" class="Symbol">(</a><a id="826" href="Text.Parser.Position.html#427" class="Field">line</a> <a id="831" href="Text.Parser.Position.html#810" class="Bound">p</a><a id="832" class="Symbol">)</a> <a id="834" href="Data.String.Base.html#2366" class="Function Operator">++</a> <a id="837" class="String">&quot;:&quot;</a> <a id="841" href="Data.String.Base.html#2366" class="Function Operator">++</a> <a id="844" href="Data.Nat.Show.html#1928" class="Function">NShow.show</a> <a id="855" class="Symbol">(</a><a id="856" href="Text.Parser.Position.html#446" class="Field">offset</a> <a id="863" href="Text.Parser.Position.html#810" class="Bound">p</a><a id="864" class="Symbol">)</a>

<a id="867" class="Comment">-- Deprecated names</a>

<a id="next"></a><a id="888" href="Text.Parser.Position.html#888" class="Function">next</a> <a id="893" class="Symbol">=</a> <a id="895" href="Text.Parser.Position.html#531" class="Function">update</a>
<a id="902" class="Symbol">{-#</a> <a id="906" class="Keyword">WARNING_ON_USAGE</a> <a id="923" class="Pragma">next</a>
<a id="928" class="String">&quot;Warning: next was deprecated in v0.2.3.
Please use update instead.&quot;</a>
<a id="997" class="Symbol">#-}</a>
</pre></body></html>